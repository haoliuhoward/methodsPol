<!DOCTYPE html>
<html lang="en" 
      xmlns:og="http://ogp.me/ns#" 
      xmlns:fb="https://www.facebook.com/2008/fbml">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  

  
  
  
  
  
    
    
    
  
  

  

  
  
  
    
  
  <meta name="description" content="Tidy data We can use the pivot_longer function to make data that is in “wide” format into “long” format.
Here’s an example, using the drinks dataset from fivethirtyheight.
# load libraries library(tidyverse) library(fivethirtyeight) # too many countries, let&#39;s look at a few # %in% is a new logical operator: returns observations that match one of the strings drinks_subset = drinks %&gt;% filter(country %in% c(&quot;USA&quot;, &quot;China&quot;, &quot;Italy&quot;, &quot;Saudi Arabia&quot;)) # let&#39;s gather the three alcohol variables into two: type and serving tidy_drinks = drinks_subset %&gt;% pivot_longer(cols = c(beer_servings, spirit_servings, wine_servings), names_to = &quot;type&quot;, values_to = &quot;serving&quot;) tidy_drinks ## # A tibble: 12 × 4 ## country total_litres_of_pure_alcohol type serving ## &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;int&gt; ## 1 China 5 beer_servings 79 ## 2 China 5 spirit_servings 192 ## 3 China 5 wine_servings 8 ## 4 Italy 6.">

  
  <link rel="alternate" hreflang="en" href="/class/data-tidy/">

  


  
  
  
  <meta name="theme-color" content="#b55716">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    

  

  
  
  
    
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i&display=swap">
    
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu1e2353bd87e0b7890d448fb2a2c440a0_1004273_32x32_fill_lanczos_center_3.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu1e2353bd87e0b7890d448fb2a2c440a0_1004273_192x192_fill_lanczos_center_3.png">

  <link rel="canonical" href="/class/data-tidy/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@haoliuhoward">
  <meta property="twitter:creator" content="@haoliuhoward">
  
  <meta property="og:site_name" content="Methods of Political Analysis">
  <meta property="og:url" content="/class/data-tidy/">
  <meta property="og:title" content="Tidy data | Methods of Political Analysis">
  <meta property="og:description" content="Tidy data We can use the pivot_longer function to make data that is in “wide” format into “long” format.
Here’s an example, using the drinks dataset from fivethirtyheight.
# load libraries library(tidyverse) library(fivethirtyeight) # too many countries, let&#39;s look at a few # %in% is a new logical operator: returns observations that match one of the strings drinks_subset = drinks %&gt;% filter(country %in% c(&quot;USA&quot;, &quot;China&quot;, &quot;Italy&quot;, &quot;Saudi Arabia&quot;)) # let&#39;s gather the three alcohol variables into two: type and serving tidy_drinks = drinks_subset %&gt;% pivot_longer(cols = c(beer_servings, spirit_servings, wine_servings), names_to = &quot;type&quot;, values_to = &quot;serving&quot;) tidy_drinks ## # A tibble: 12 × 4 ## country total_litres_of_pure_alcohol type serving ## &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;int&gt; ## 1 China 5 beer_servings 79 ## 2 China 5 spirit_servings 192 ## 3 China 5 wine_servings 8 ## 4 Italy 6."><meta property="og:image" content="/media/social-image.png">
  <meta property="twitter:image" content="/media/social-image.png"><meta property="og:locale" content="en">
  
    
    
  

  



  


  


  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/img/apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/img/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/img/apple-touch-icon-152x152.png" />
  <link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16" />
  <meta name="application-name" content="POLI502: Methods of Political Analysis" />
  <meta name="msapplication-TileColor" content="#FFFFFF" />
  <meta name="msapplication-TileImage" content="/img/mstile-144x144.png" />


  <title>Tidy data | Methods of Political Analysis</title>

</head>


<body id="top" data-spy="scroll" data-offset="70"
    data-target="#TableOfContents"
    >

    <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


    












<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Methods of Political Analysis</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Methods of Political Analysis</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/syllabus/"><span>Syllabus</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/schedule/"><span>Schedule</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/assignment/"><span>Assignments</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/reference/"><span>Reference</span></a>
        </li>

        
        

        

        
        
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/"><span><i class="fab fa-slack"></i> Slack</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      

      

      

    </ul>

  </div>
</nav>



    

<div class="container-fluid docs">
    <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
            





  
    
  




<form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
</form>

<nav class="collapse docs-links" id="docs-nav">
  

  
  
  
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/class/getting-started/">Class</a>
    <ul class="nav docs-sidenav">
      
      <li >
        <a href="/class/getting-started/">R, Rstudio, basics</a>
      </li>
      
      <li >
        <a href="/class/dataviz/">Data visualization</a>
      </li>
      
      <li >
        <a href="/class/data-wrangle/">Data Wrangling</a>
      </li>
      
      <li >
        <a href="/class/data-summary/">Summarizing Data</a>
      </li>
      
      <li class="active">
        <a href="/class/data-tidy/">Tidy data</a>
      </li>
      
      <li >
        <a href="/class/regression/">Correlation and regression</a>
      </li>
      
      <li >
        <a href="/class/prediction/">Prediction</a>
      </li>
      
      <li >
        <a href="/class/causality/">Causality</a>
      </li>
      
      <li >
        <a href="/class/confounds/">Confounds</a>
      </li>
      
      <li >
        <a href="/class/dags/">DAGs</a>
      </li>
      
      <li >
        <a href="/class/controls/">Natural Experiments</a>
      </li>
      
      <li >
        <a href="/class/fixed-effects/">Fixed Effects &#43; DID</a>
      </li>
      
      <li >
        <a href="/class/uncertainty/">Uncertainty</a>
      </li>
      
      <li >
        <a href="/class/rdd/">Regression discontinuity</a>
      </li>
      
      <li >
        <a href="/class/bootstrap/">Bootstrap</a>
      </li>
      
    </ul>
    

  </div>
  
  
</nav>

        </div>

        

        <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

            <article class="article">

                <div class="docs-article-container">
                    <h1>Tidy data</h1>

                    

                    

                    

                    <div class="article-style">
                        <h2 id="tidy-data">Tidy data</h2>
<p>We can use the <code>pivot_longer</code> function to make data that is in “wide” format into “long” format.</p>
<p>Here’s an example, using the <code>drinks</code> dataset from <code>fivethirtyheight</code>.</p>
<pre><code class="language-r"># load libraries
library(tidyverse)
library(fivethirtyeight)

# too many countries, let's look at a few
# %in% is a new logical operator: returns observations that match one of the strings
drinks_subset = 
  drinks %&gt;% 
  filter(country %in% c(&quot;USA&quot;, &quot;China&quot;, &quot;Italy&quot;, &quot;Saudi Arabia&quot;)) 


# let's gather the three alcohol variables into two: type and serving
tidy_drinks = drinks_subset %&gt;% 
  pivot_longer(cols = c(beer_servings, spirit_servings, wine_servings), 
               names_to = &quot;type&quot;, values_to = &quot;serving&quot;)
tidy_drinks
</code></pre>
<pre><code>## # A tibble: 12 × 4
##    country      total_litres_of_pure_alcohol type            serving
##    &lt;chr&gt;                               &lt;dbl&gt; &lt;chr&gt;             &lt;int&gt;
##  1 China                                 5   beer_servings        79
##  2 China                                 5   spirit_servings     192
##  3 China                                 5   wine_servings         8
##  4 Italy                                 6.5 beer_servings        85
##  5 Italy                                 6.5 spirit_servings      42
##  6 Italy                                 6.5 wine_servings       237
##  7 Saudi Arabia                          0.1 beer_servings         0
##  8 Saudi Arabia                          0.1 spirit_servings       5
##  9 Saudi Arabia                          0.1 wine_servings         0
## 10 USA                                   8.7 beer_servings       249
## 11 USA                                   8.7 spirit_servings     158
## 12 USA                                   8.7 wine_servings        84
</code></pre>
<pre><code class="language-r"># let's put position = dodge in geom_col, which will place bars side by side
ggplot(tidy_drinks, aes(x = country, y = serving, fill = type)) + 
  geom_col(position = &quot;dodge&quot;)
</code></pre>
<img src="/class/data-tidy_files/figure-html/unnamed-chunk-1-1.png" width="672" />
<p>Here’s another example, using the <code>masculinity survey</code> from <code>fivethirtyeight</code>.</p>
<pre><code class="language-r"># different dataset on masculinity
masculinity_survey
</code></pre>
<pre><code>## # A tibble: 189 × 12
##    question  response overall age_18_34 age_35_64 age_65_over white_yes white_no
##    &lt;fct&gt;     &lt;fct&gt;      &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
##  1 &quot;In gene… Very ma…    0.37      0.29      0.42        0.37      0.34     0.44
##  2 &quot;In gene… Somewha…    0.46      0.47      0.46        0.47      0.5      0.39
##  3 &quot;In gene… Not ver…    0.11      0.13      0.09        0.13      0.11     0.11
##  4 &quot;In gene… Not at …    0.05      0.1       0.02        0.03      0.04     0.06
##  5 &quot;In gene… No answ…    0.01      0         0.01        0.01      0.01     0   
##  6 &quot;How imp… Very im…    0.16      0.18      0.17        0.13      0.11     0.26
##  7 &quot;How imp… Somewha…    0.37      0.38      0.37        0.32      0.38     0.35
##  8 &quot;How imp… Not too…    0.28      0.18      0.31        0.37      0.32     0.2 
##  9 &quot;How imp… Not at …    0.18      0.26      0.15        0.18      0.18     0.19
## 10 &quot;How imp… No answ…    0         0         0.01        0         0        0   
## # ℹ 179 more rows
## # ℹ 4 more variables: children_yes &lt;dbl&gt;, children_no &lt;dbl&gt;,
## #   straight_yes &lt;dbl&gt;, straight_no &lt;dbl&gt;
</code></pre>
<pre><code class="language-r"># focus on one question
# collapse age categories into long format
manly_pressure = masculinity_survey %&gt;% 
  filter(question == &quot;Do you think that society puts pressure on men in a way that is unhealthy or bad for them?&quot;) %&gt;% 
  pivot_longer(names_to = &quot;ages&quot;, 
               values_to = &quot;percent&quot;, 
               c(age_18_34, age_35_64, age_65_over))

manly_pressure
</code></pre>
<pre><code>## # A tibble: 9 × 11
##   question          response overall white_yes white_no children_yes children_no
##   &lt;fct&gt;             &lt;fct&gt;      &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
## 1 Do you think tha… Yes         0.6       0.58     0.65         0.56        0.66
## 2 Do you think tha… Yes         0.6       0.58     0.65         0.56        0.66
## 3 Do you think tha… Yes         0.6       0.58     0.65         0.56        0.66
## 4 Do you think tha… No          0.39      0.41     0.35         0.44        0.34
## 5 Do you think tha… No          0.39      0.41     0.35         0.44        0.34
## 6 Do you think tha… No          0.39      0.41     0.35         0.44        0.34
## 7 Do you think tha… No answ…    0.01      0.01     0            0.01        0   
## 8 Do you think tha… No answ…    0.01      0.01     0            0.01        0   
## 9 Do you think tha… No answ…    0.01      0.01     0            0.01        0   
## # ℹ 4 more variables: straight_yes &lt;dbl&gt;, straight_no &lt;dbl&gt;, ages &lt;chr&gt;,
## #   percent &lt;dbl&gt;
</code></pre>
<p>And we can plot the results:</p>
<pre><code class="language-r"># plot
ggplot(manly_pressure, aes(x = response, y = percent, fill = ages)) + 
  geom_col(position = &quot;dodge&quot;)
</code></pre>
<img src="/class/data-tidy_files/figure-html/unnamed-chunk-3-1.png" width="672" />
<p>Finally, here’s another example using <code>relig_income</code>. Notice here how instead of explicitly writing out every variable we want to collapse, we can just exclude the only other variable in the dataset via the “-”.</p>
<pre><code class="language-r"># look at the data
relig_income
</code></pre>
<pre><code>## # A tibble: 18 × 11
##    religion `&lt;$10k` `$10-20k` `$20-30k` `$30-40k` `$40-50k` `$50-75k` `$75-100k`
##    &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
##  1 Agnostic      27        34        60        81        76       137        122
##  2 Atheist       12        27        37        52        35        70         73
##  3 Buddhist      27        21        30        34        33        58         62
##  4 Catholic     418       617       732       670       638      1116        949
##  5 Don’t k…      15        14        15        11        10        35         21
##  6 Evangel…     575       869      1064       982       881      1486        949
##  7 Hindu          1         9         7         9        11        34         47
##  8 Histori…     228       244       236       238       197       223        131
##  9 Jehovah…      20        27        24        24        21        30         15
## 10 Jewish        19        19        25        25        30        95         69
## 11 Mainlin…     289       495       619       655       651      1107        939
## 12 Mormon        29        40        48        51        56       112         85
## 13 Muslim         6         7         9        10         9        23         16
## 14 Orthodox      13        17        23        32        32        47         38
## 15 Other C…       9         7        11        13        13        14         18
## 16 Other F…      20        33        40        46        49        63         46
## 17 Other W…       5         2         3         4         2         7          3
## 18 Unaffil…     217       299       374       365       341       528        407
## # ℹ 3 more variables: `$100-150k` &lt;dbl&gt;, `&gt;150k` &lt;dbl&gt;,
## #   `Don't know/refused` &lt;dbl&gt;
</code></pre>
<pre><code class="language-r"># make tidy
tidy_relig = relig_income %&gt;% 
  pivot_longer(-religion, names_to = &quot;income_categories&quot;, 
               values_to = &quot;responses&quot;) %&gt;% 
  group_by(religion) %&gt;% 
  mutate(percent = responses/sum(responses))


# make the plot
ggplot(tidy_relig, aes(x = income_categories, y = percent)) + 
  geom_col() + 
  facet_wrap(vars(religion)) + 
  coord_flip() + 
  theme_light()
</code></pre>
<img src="/class/data-tidy_files/figure-html/unnamed-chunk-4-1.png" width="672" />
<h2 id="counts-and-percentages-group_by--tally">Counts and percentages (group_by + tally)</h2>
<p>Say we wanted to count how many characters in the starwars dataset have blonde, brown, etc., hair. I can do this with <code>group_by</code> and <code>tally</code>:</p>
<pre><code class="language-r">starwars %&gt;% 
  group_by(hair_color) %&gt;% 
  tally()
</code></pre>
<pre><code>## # A tibble: 13 × 2
##    hair_color        n
##    &lt;chr&gt;         &lt;int&gt;
##  1 auburn            1
##  2 auburn, grey      1
##  3 auburn, white     1
##  4 black            13
##  5 blond             3
##  6 blonde            1
##  7 brown            18
##  8 brown, grey       1
##  9 grey              1
## 10 none             37
## 11 unknown           1
## 12 white             4
## 13 &lt;NA&gt;              5
</code></pre>
<p>Or, with <code>group_by</code> and <code>summarise</code> and <code>n()</code>:</p>
<pre><code class="language-r">starwars %&gt;% 
  group_by(hair_color) %&gt;% 
  summarise(n = n())
</code></pre>
<pre><code>## # A tibble: 13 × 2
##    hair_color        n
##    &lt;chr&gt;         &lt;int&gt;
##  1 auburn            1
##  2 auburn, grey      1
##  3 auburn, white     1
##  4 black            13
##  5 blond             3
##  6 blonde            1
##  7 brown            18
##  8 brown, grey       1
##  9 grey              1
## 10 none             37
## 11 unknown           1
## 12 white             4
## 13 &lt;NA&gt;              5
</code></pre>
<p>Now, say I wanted to calculate the <em>percent</em> of characters with each eye color. I can do this below:</p>
<pre><code class="language-r">starwars %&gt;% 
  group_by(hair_color) %&gt;% 
  tally() %&gt;% 
  mutate(percent = n/sum(n))
</code></pre>
<pre><code>## # A tibble: 13 × 3
##    hair_color        n percent
##    &lt;chr&gt;         &lt;int&gt;   &lt;dbl&gt;
##  1 auburn            1  0.0115
##  2 auburn, grey      1  0.0115
##  3 auburn, white     1  0.0115
##  4 black            13  0.149 
##  5 blond             3  0.0345
##  6 blonde            1  0.0115
##  7 brown            18  0.207 
##  8 brown, grey       1  0.0115
##  9 grey              1  0.0115
## 10 none             37  0.425 
## 11 unknown           1  0.0115
## 12 white             4  0.0460
## 13 &lt;NA&gt;              5  0.0575
</code></pre>
<h2 id="factor-variables">Factor variables</h2>
<p>Sometimes we have a categorical variable (e.g., months of the year) that we understand as having some qualitative ordering (e.g., January comes before June). R doesn’t know this though, but we can tell it using <code>factor</code> variables.</p>
<p>Here’s an example using some data I made up:</p>
<pre><code class="language-r"># i have data on weather that looks like this:
weather = tibble(temp = c(80, 23, 14, 23, 25), 
                 month = c(&quot;January&quot;, &quot;December&quot;, 
                           &quot;July&quot;, &quot;June&quot;, &quot;October&quot;))

weather
</code></pre>
<pre><code>## # A tibble: 5 × 2
##    temp month   
##   &lt;dbl&gt; &lt;chr&gt;   
## 1    80 January 
## 2    23 December
## 3    14 July    
## 4    23 June    
## 5    25 October
</code></pre>
<pre><code class="language-r"># i want the month variable in order
# i can use factors for this
weather_factor = weather %&gt;% 
  mutate(month_factor = factor(month, levels = c(&quot;January&quot;, &quot;June&quot;, 
                                          &quot;July&quot;, &quot;October&quot;, 
                                          &quot;December&quot;)))
</code></pre>
<p>Notice plot without factor:</p>
<pre><code class="language-r">ggplot(weather, aes(x = month, y = temp)) + geom_col()
</code></pre>
<img src="/class/data-tidy_files/figure-html/unnamed-chunk-9-1.png" width="672" />
<p>And new and imrpoved plot where month is a factor:</p>
<pre><code class="language-r">ggplot(weather_factor, aes(x = month_factor, y = temp)) + geom_col()
</code></pre>
<img src="/class/data-tidy_files/figure-html/unnamed-chunk-10-1.png" width="672" />
<h3 id="fct_reorder">fct_reorder</h3>
<p>Instead of explicitly telling R how we want to order a factor, we can instead use another variable in the dataset to determine the order.</p>
<p>Look at the example below, using the <code>starwars</code> dataset:</p>
<pre><code class="language-r"># starwars example
starwars
</code></pre>
<pre><code>## # A tibble: 87 × 14
##    name     height  mass hair_color skin_color eye_color birth_year sex   gender
##    &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
##  1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…
##  2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu…
##  3 R2-D2        96    32 &lt;NA&gt;       white, bl… red             33   none  mascu…
##  4 Darth V…    202   136 none       white      yellow          41.9 male  mascu…
##  5 Leia Or…    150    49 brown      light      brown           19   fema… femin…
##  6 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…
##  7 Beru Wh…    165    75 brown      light      blue            47   fema… femin…
##  8 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu…
##  9 Biggs D…    183    84 black      light      brown           24   male  mascu…
## 10 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…
## # ℹ 77 more rows
## # ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
## #   vehicles &lt;list&gt;, starships &lt;list&gt;
</code></pre>
<pre><code class="language-r"># count how many characters with each eye_color
star_eyes = starwars %&gt;% 
  group_by(eye_color) %&gt;% 
  tally()

star_eyes = star_eyes %&gt;% 
  mutate(eye_color = fct_reorder(eye_color, n))

ggplot(star_eyes, aes(x = eye_color, y = n)) + 
  geom_col() + 
  coord_flip()
</code></pre>
<img src="/class/data-tidy_files/figure-html/unnamed-chunk-11-1.png" width="672" />

                    </div>

                    



                    
                </div>

                <div class="body-footer">
                    <p>Last updated on January 1, 0001</p>

                    





                    

                </div>

            </article>

            <footer>
    <hr>

    <div class="row course-info">
        <div class="col-md-7">
            <p>
                <strong>POLI502: Methods of Political Analysis (Fall 2023)</strong><br>

                <a href="https://sc.edu/" target="_blank" rel="noopener">University of South Carolina</a> &emsp;&emsp;
                <a href="https://sc.edu/" target="_blank" rel="noopener">Department of Political Science</a>
            </p>

            <p>
                <a href="https://www.howardhliu.com" target="_blank" rel="noopener"><i class="fas fa-user"></i>
                    Howard Liu</a> &emsp;&emsp;
                <a href="mailto:howard.liu@sc.edu"><i class="fas fa-envelope"></i>
                    howard.liu@sc.edu</a>
            </p>

            <p>
                <i class="far fa-calendar-alt"></i> T,TH &emsp;&emsp;
                <i class="far fa-clock"></i> 2:50 PM - 4:00 PM <br>
                <i class="fas fa-university"></i> GAM 502
            </p>
        </div>

        <div class="col-md-5 credits">
            <p>All content licensed under a <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.</p>
            
            <p>Content <i class="fab fa-creative-commons"></i> 2023 <a href="https://www.howardhliu.com" target="_blank" rel="noopener">Howard Liu</a></p>                    
            
            <p><a href="https://github.com/haoliuhoward/" target="_blank" rel="noopener"><i class="fab fa-github"></i> View the source at GitHub.</a></p>
        </div>
    </div>
</footer>


        </main>
    </div>
</div>

        

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js" integrity="sha512-7t8APmYpzEsZP7CYoA7RfMPV9Bb+PJHa9x2WiUnDXZx3XHveuyWUtvNOexhkierl5flZ3tr92dP1mMS+SGlD+A==" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/r.min.js"></script>
        
      

    

    
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js" integrity="sha256-pB/deHc9CGfFpJRjC43imB29Rse8tak+5eXqntO94ck=" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    

    
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    <script src="/js/academic.min.0fb7942447739a02d0f559c43b9bf1aa.js"></script>

    






    
    

    
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>

</html>
